!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.StormFocusManager=t()}(this,function(){"use strict";function e(e){this.node=e,this.focusableChildren=this.getFocusableChildren()}function t(t){if(!t)throw new Error("FocusManager cannot be initialised, no augmentable elements found");return new e(t)}return e.prototype.getFocusableChildren=function(e){var t=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex="-1"])'];return[].slice.call(this.node.querySelectorAll(t.join(","))).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})},e.prototype.addListeners=function(){document.addEventListener("keydown",this.keyListener.bind(this),!0)},e.prototype.removeListeners=function(){document.removeEventListener("keydown",this.keyListener)},e.prototype.keyListener=function(e){9===e.keyCode&&this.catchTab(e)},e.prototype.catchTab=function(e){var t=this.focusableChildren.indexOf(document.activeElement);e.shiftKey&&0===t?(this.focusableChildren[this.focusableChildren.length-1].focus(),e.preventDefault()):event.shiftKey||t!==this.focusableChildren.length-1||(this.focusableChildren[0].focus(),encodeURI.preventDefault())},e.prototype.start=function(){this.lastFocused=document.activeElement},e.prototype.focusFirst=function(){this.focusableChildren[0].focus()},{init:t}});